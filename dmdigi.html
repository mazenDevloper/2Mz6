<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>إنفوجرافيك أفقي متقدم: رحلة التحول الرقمي لبلدية ظفار</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Import Tajawal font from Google Fonts */
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap');

        body {
            font-family: 'Tajawal', sans-serif;
            background-color: #f0f4f8; /* Lighter cool gray background */
        }
        .achievement-item {
            display: flex;
            align-items: center;
        }
        .stats-item {
            display: flex;
            align-items: center;
            margin-top: 0.5rem;
            font-size: 0.875rem; /* text-sm */
        }
        /* Custom scrollbar for better aesthetics on horizontal scroll */
        .timeline-horizontal::-webkit-scrollbar {
            height: 10px;
        }
        .timeline-horizontal::-webkit-scrollbar-track {
            background: #d1d5db; /* gray-300 */
            border-radius: 10px;
        }
        .timeline-horizontal::-webkit-scrollbar-thumb {
            /* Updated gradient: rose-500 to indigo-700 */
            background: linear-gradient(to right, #f43f5e, #4338ca);
            border-radius: 10px;
        }
        .timeline-horizontal::-webkit-scrollbar-thumb:hover {
            /* Updated gradient: rose-600 to indigo-800 */
            background: linear-gradient(to right, #e11d48, #3730a3);
        }

        .nav-button {
            /* Updated gradient: Rose-500, Purple-600, Indigo-700 */
            background-image: linear-gradient(to bottom right, #f43f5e, #9333ea, #4338ca);
            color: white;
            width: 3rem; /* 48px */
            height: 3rem; /* 48px */
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            cursor: pointer;
            z-index: 20;
            /* Added min-width and padding for text buttons */
            min-width: 4rem; /* Adjust as needed for text */
            padding: 0 1rem;
            border-radius: 9999px; /* Make them pill-shaped for text */
        }
        .nav-button:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.25);
        }
        .nav-button:disabled {
            background-image: none;
            background-color: #9ca3af; /* gray-400 */
            cursor: not-allowed;
            opacity: 0.6;
            transform: scale(1);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        }
        .card-icon-bg {
            /* Updated gradient: Rose-500, Purple-600, Indigo-700 */
            background-image: linear-gradient(to bottom right, #f43f5e, #9333ea, #4338ca);
        }
        .year-badge-gradient {
            /* Updated gradient: Rose-500, Purple-600, Indigo-700 */
             background-image: linear-gradient(to right, #f43f5e, #9333ea, #4338ca);
        }
        .scroll-to-start-button {
            /* Specific styling if needed, defaults to nav-button */
            min-width: unset; /* Revert min-width for the flag button */
            padding: unset; /* Revert padding for the flag button */
            width: 3rem; /* Keep it round */
            height: 3rem; /* Keep it round */
            border-radius: 50%; /* Keep it round */
        }
        /* New style for the Future Vision card */
        .future-vision-card {
            background-color: #e0f2fe; /* Light blue background */
            border: 2px solid #90cdf4; /* Light blue border */
            color: #1e3a8a; /* Dark blue text */
        }
    </style>
</head>
<body class="bg-slate-100">
    <div class="container mx-auto px-2 sm:px-4 py-8">
        <header class="text-center mb-10 sm:mb-12">
            <h1 class="text-3xl sm:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-rose-500 via-purple-600 to-indigo-700 pb-2">
                رحلة التحول الرقمي لبلدية ظفار
            </h1>
            <p class="text-md sm:text-lg text-slate-600 mt-2">نظرة عامة أفقية على الإنجازات الرئيسية منذ عام 2020</p>
        </header>

        <div class="relative">
            <!-- Navigation Buttons - Reversed Directions -->
            <!-- Next Button (visually on the right in RTL, scrolls content left to show later cards) -->
            <button id="nextButton" class="nav-button absolute top-1/2 -translate-y-1/2 right-0 sm:right-1 md:right-2 transform focus:outline-none text-base font-bold" title="التالي">
                التالي
            </button>
            <!-- Prev Button (visually on the left in RTL, scrolls content right to show earlier cards) -->
            <button id="prevButton" class="nav-button absolute top-1/2 -translate-y-1/2 left-0 sm:left-1 md:left-2 transform focus:outline-none text-base font-bold" title="السابق">
                السابق
            </button>
            <!-- Scroll to Start Button (visually on the right, scrolls to the beginning of the timeline) -->
            <button id="scrollToStartButton" class="nav-button scroll-to-start-button absolute top-full mt-4 right-1/2 translate-x-1/2 sm:right-4 sm:translate-x-0 sm:top-1/2 sm:-translate-y-1/2 sm:mt-0 sm:mr-16 md:mr-20" title="العودة للبداية">
                <i class="fas fa-flag"></i> <!-- Changed icon to flag -->
            </button>


            <!-- Timeline Container -->
            <div id="timelineContainer" class="timeline-horizontal flex flex-row items-stretch space-x-4 md:space-x-6 p-4 pb-8 sm:p-8 sm:pb-12 overflow-x-auto mx-10 sm:mx-12 md:mx-16 scroll-smooth">

                <!-- 2020 Card -->
                <div class="bg-white rounded-xl shadow-2xl p-5 sm:p-6 w-72 sm:w-80 md:w-96 flex-shrink-0 flex flex-col transition-all duration-300 hover:shadow-3xl transform hover:-translate-y-1">
                    <div class="flex items-center mb-3 sm:mb-4">
                        <div class="p-2 sm:p-3 card-icon-bg text-white rounded-full shadow-md mr-0 ml-2 sm:ml-3">
                            <i class="fas fa-cogs text-lg sm:text-xl md:text-2xl"></i>
                        </div>
                        <span class="year-badge-gradient text-white text-lg sm:text-xl font-bold px-3 sm:px-4 py-1 rounded-lg shadow">2020</span>
                    </div>
                    <h3 class="text-lg sm:text-xl font-bold text-indigo-800 mb-2">التأسيس والتغلب على التحديات</h3>
                    <p class="text-slate-600 text-xs sm:text-sm mb-3 flex-grow">
                        واجهت البلدية تحديات أولية في مسيرة التحول الرقمي:
                    </p>
                    <ul class="space-y-1 sm:space-y-1 text-xs sm:text-sm">
                        <li class="achievement-item"><i class="fas fa-exclamation-triangle fa-fw text-rose-600 mr-0 ml-2"></i> نقص قاعدة البيانات.</li>
                        <li class="achievement-item"><i class="fas fa-hand-paper fa-fw text-rose-600 mr-0 ml-2"></i> مقاومة التغيير.</li>
                        <li class="achievement-item"><i class="fas fa-virus fa-fw text-rose-600 mr-0 ml-2"></i> ظروف جائحة كوفيد-19.</li>
                        <li class="achievement-item"><i class="fas fa-users fa-fw text-rose-600 mr-0 ml-2"></i> تشكيل فرق عمل متخصصة.</li>
                        <li class="achievement-item"><i class="fas fa-database fa-fw text-rose-600 mr-0 ml-2"></i> إنشاء قاعدة بيانات أساسية.</li>
                        <li class="achievement-item"><i class="fas fa-globe fa-fw text-rose-600 mr-0 ml-2"></i> إطلاق بوابة الخدمات الإلكترونية (15 ديسمبر).</li>
                        <li class="achievement-item"><i class="fas fa-file-signature fa-fw text-rose-600 mr-0 ml-2"></i> إطلاق خدمات (التراخيص، عقود الإيجار، الدفع الإلكتروني).</li>
                        <li class="achievement-item"><i class="fab fa-whatsapp fa-fw text-rose-600 mr-0 ml-2"></i> توفير دعم فني عبر واتساب.</li>
                    </ul>
                </div>

                <!-- Arrow Separator -->
                <div class="hidden md:flex items-center justify-center flex-shrink-0">
                    <i class="fas fa-long-arrow-alt-left text-indigo-700 text-2xl sm:text-3xl md:text-4xl opacity-50"></i>
                </div>

                <!-- 2021 Card -->
                <div class="bg-white rounded-xl shadow-2xl p-5 sm:p-6 w-72 sm:w-80 md:w-96 flex-shrink-0 flex flex-col transition-all duration-300 hover:shadow-3xl transform hover:-translate-y-1">
                    <div class="flex items-center mb-3 sm:mb-4">
                        <div class="p-2 sm:p-3 card-icon-bg text-white rounded-full shadow-md mr-0 ml-2 sm:ml-3">
                            <i class="fas fa-chart-line text-lg sm:text-xl md:text-2xl"></i>
                        </div>
                        <span class="year-badge-gradient text-white text-lg sm:text-xl font-bold px-3 sm:px-4 py-1 rounded-lg shadow">2021</span>
                    </div>
                    <h3 class="text-lg sm:text-xl font-bold text-indigo-800 mb-2">تطوير وتوسيع الخدمات</h3>
                    <p class="text-slate-600 text-xs sm:text-sm mb-3 flex-grow">
                        تركيز على تطوير البوابة، إنشاء مراكز خدمة خارجية، وإطلاق خدمات مبتكرة.
                    </p>
                    <ul class="space-y-1 sm:space-y-1.5 text-xs sm:text-sm">
                        <li class="achievement-item"><i class="fas fa-laptop-code fa-fw text-rose-600 mr-0 ml-2"></i> تطوير البوابة الإلكترونية.</li>
                        <li class="achievement-item"><i class="fas fa-building fa-fw text-rose-600 mr-0 ml-2"></i> إنشاء مراكز خدمة خارجية.</li>
                        <li class="achievement-item"><i class="fas fa-robot fa-fw text-rose-600 mr-0 ml-2"></i> إطلاق برنامج المحادثة "سهالة" (1 أبريل).</li>
                        <li class="achievement-item"><i class="fas fa-cloud fa-fw text-rose-600 mr-0 ml-2"></i> الانتقال للخدمات السحابية (1 أبريل).</li>
                        <li class="achievement-item"><i class="fas fa-hard-hat fa-fw text-rose-600 mr-0 ml-2"></i> تصحيح تراخيص البناء ورقابة البناء (15 أغسطس).</li>
                    </ul>
                    <div class="mt-auto pt-2 sm:pt-3">
                        <div class="stats-item text-slate-700"><i class="fas fa-eye fa-fw text-purple-600 mr-0 ml-1.5"></i> 364,851 زيارة للبوابة.</div>
                        <div class="stats-item text-slate-700"><i class="fas fa-cogs fa-fw text-purple-600 mr-0 ml-1.5"></i> 52,124 عدد المعاملات في منافذ بلدية ظفار الرقمية.</div>
                    </div>
                </div>

                <!-- Arrow Separator -->
                <div class="hidden md:flex items-center justify-center flex-shrink-0">
                    <i class="fas fa-long-arrow-alt-left text-indigo-700 text-2xl sm:text-3xl md:text-4xl opacity-50"></i>
                </div>

                <!-- 2022 Card -->
                <div class="bg-white rounded-xl shadow-2xl p-5 sm:p-6 w-72 sm:w-80 md:w-96 flex-shrink-0 flex flex-col transition-all duration-300 hover:shadow-3xl transform hover:-translate-y-1">
                    <div class="flex items-center mb-3 sm:mb-4">
                        <div class="p-2 sm:p-3 card-icon-bg text-white rounded-full shadow-md mr-0 ml-2 sm:ml-3">
                            <i class="fas fa-cloud-upload-alt text-lg sm:text-xl md:text-2xl"></i>
                        </div>
                        <span class="year-badge-gradient text-white text-lg sm:text-xl font-bold px-3 sm:px-4 py-1 rounded-lg shadow">2022</span>
                    </div>
                    <h3 class="text-lg sm:text-xl font-bold text-indigo-800 mb-2">التحول السحابي الكامل والرقمنة</h3>
                    <p class="text-slate-600 text-xs sm:text-sm mb-3 flex-grow">
                        استكمال التحول للخدمات السحابية، وتطويرات إضافية تشمل الرقمنة وإطلاق تطبيقات متخصصة.
                    </p>
                    <ul class="space-y-1 sm:space-y-1.5 text-xs sm:text-sm">
                        <li class="achievement-item"><i class="fas fa-cloud-upload-alt fa-fw text-rose-600 mr-0 ml-2"></i> التحول الكامل للخدمات السحابية.</li>
                        <li class="achievement-item"><i class="fas fa-qrcode fa-fw text-rose-600 mr-0 ml-2"></i> إضافة رموز QR للعقود الإلكترونية.</li>
                        <li class="achievement-item"><i class="fas fa-file-archive fa-fw text-rose-600 mr-0 ml-2"></i> بدء مشروع تحويل الملفات الورقية إلى رقمية.</li>
                        <li class="achievement-item"><i class="fas fa-mobile-alt fa-fw text-rose-600 mr-0 ml-2"></i> إطلاق تطبيق "خريف ظفار" (14 أغسطس).</li>
                    </ul>
                    <div class="mt-auto pt-2 sm:pt-3">
                        <div class="stats-item text-slate-700"><i class="fas fa-eye fa-fw text-purple-600 mr-0 ml-1.5"></i> 1,165,138 زيارة للبوابة.</div>
                        <div class="stats-item text-slate-700"><i class="fas fa-cogs fa-fw text-purple-600 mr-0 ml-1.5"></i> 42,763 عدد المعاملات في منافذ بلدية ظفار الرقمية.</div>
                    </div>
                </div>

                <!-- Arrow Separator -->
                <div class="hidden md:flex items-center justify-center flex-shrink-0">
                    <i class="fas fa-long-arrow-alt-left text-indigo-700 text-2xl sm:text-3xl md:text-4xl opacity-50"></i>
                </div>

                <!-- 2023 Card -->
                <div class="bg-white rounded-xl shadow-2xl p-5 sm:p-6 w-72 sm:w-80 md:w-96 flex-shrink-0 flex flex-col transition-all duration-300 hover:shadow-3xl transform hover:-translate-y-1">
                    <div class="flex items-center mb-3 sm:mb-4">
                        <div class="p-2 sm:p-3 card-icon-bg text-white rounded-full shadow-md mr-0 ml-2 sm:ml-3">
                            <i class="fas fa-lightbulb text-lg sm:text-xl md:text-2xl"></i>
                        </div>
                        <span class="year-badge-gradient text-white text-lg sm:text-xl font-bold px-3 sm:px-4 py-1 rounded-lg shadow">2023</span>
                    </div>
                    <h3 class="text-lg sm:text-xl font-bold text-indigo-800 mb-2">تطبيقات مبتكرة وبيانات مفتوحة</h3>
                    <p class="text-slate-600 text-xs sm:text-sm mb-3 flex-grow">
                        إطلاق تطبيقات جديدة، إتاحة البيانات المفتوحة، وتوظيف الذكاء الاصطناعي.
                    </p>
                    <ul class="space-y-1 sm:space-y-1.5 text-xs sm:text-sm">
                        <li class="achievement-item"><i class="fas fa-calendar-alt fa-fw text-rose-600 mr-0 ml-2"></i> تطوير تطبيق "خريف ظفار" إلى "مواسم ظفار" (1 يونيو).</li>
                        <li class="achievement-item"><i class="fas fa-thumbs-up fa-fw text-rose-600 mr-0 ml-2"></i> إطلاق تطبيق "أبشر" (1 يونيو).</li>
                        <li class="achievement-item"><i class="fas fa-database fa-fw text-rose-600 mr-0 ml-2"></i> إتاحة البيانات المفتوحة للخدمات البلدية.</li>
                        <li class="achievement-item"><i class="fas fa-brain fa-fw text-rose-600 mr-0 ml-2"></i> تطوير نظام المعلومات الجغرافية (GIS) بالذكاء الاصطناعي.</li>
                        <li class="achievement-item"><i class="fas fa-medal fa-fw text-rose-600 mr-0 ml-2"></i> أول مشاركة لمحافظة ظفار في كومكس.</li>
                    </ul>
                    <div class="mt-auto pt-2 sm:pt-3">
                        <div class="stats-item text-slate-700"><i class="fas fa-eye fa-fw text-purple-600 mr-0 ml-1.5"></i> 1,456,112 زيارة للبوابة.</div>
                        <div class="stats-item text-slate-700"><i class="fas fa-cogs fa-fw text-purple-600 mr-0 ml-1.5"></i> 45,417 عدد المعاملات في منافذ بلدية ظفار الرقمية.</div>
                    </div>
                </div>

                <!-- Arrow Separator -->
                <div class="hidden md:flex items-center justify-center flex-shrink-0">
                    <i class="fas fa-long-arrow-alt-left text-indigo-700 text-2xl sm:text-3xl md:text-4xl opacity-50"></i>
                </div>

                <!-- 2024 Card -->
                <div class="bg-white rounded-xl shadow-2xl p-5 sm:p-6 w-72 sm:w-80 md:w-96 flex-shrink-0 flex flex-col transition-all duration-300 hover:shadow-3xl transform hover:-translate-y-1">
                    <div class="flex items-center mb-3 sm:mb-4">
                        <div class="p-2 sm:p-3 card-icon-bg text-white rounded-full shadow-md mr-0 ml-2 sm:ml-3">
                            <i class="fas fa-rocket text-lg sm:text-xl md:text-2xl"></i>
                        </div>
                        <span class="year-badge-gradient text-white text-lg sm:text-xl font-bold px-3 sm:px-4 py-1 rounded-lg shadow">2024</span>
                    </div>
                    <h3 class="text-lg sm:text-xl font-bold text-indigo-800 mb-2">تقنيات متقدمة ومبادرات مجتمعية</h3>
                    <p class="text-slate-600 text-xs sm:text-sm mb-3 flex-grow">
                        التركيز على توظيف أحدث التقنيات والمبادرات التي تعزز المشاركة المجتمعية.
                    </p>
                    <ul class="space-y-1 sm:space-y-1.5 text-xs sm:text-sm">
                        <li class="achievement-item"><i class="fas fa-vr-cardboard fa-fw text-rose-600 mr-0 ml-2"></i> تدشين خدمة العملاء بتقنية الميتافيرس (27 مايو).</li>
                        <li class="achievement-item"><i class="fas fa-city fa-fw text-rose-600 mr-0 ml-2"></i> إطلاق منصة صلالة الذكية (27 مايو).</li>
                        <li class="achievement-item"><i class="fas fa-camera-retro fa-fw text-rose-600 mr-0 ml-2"></i> تركيب كاميرات ذكاء اصطناعي في المناطق الحيوية.</li>
                        <li class="achievement-item"><i class="fas fa-hand-pointer fa-fw text-rose-600 mr-0 ml-2"></i> تطبيق "ضع بصمتك".</li>
                        <li class="achievement-item"><i class="fas fa-chart-pie fa-fw text-rose-600 mr-0 ml-2"></i> منصة بلدية ظفار للاستثمار.</li>
                    </ul>
                </div>

                <!-- Arrow Separator -->
                <div class="hidden md:flex items-center justify-center flex-shrink-0">
                    <i class="fas fa-long-arrow-alt-left text-indigo-700 text-2xl sm:text-3xl md:text-4xl opacity-50"></i>
                </div>

                <!-- 2025 Card (New) -->
                <div class="bg-white rounded-xl shadow-2xl p-5 sm:p-6 w-72 sm:w-80 md:w-96 flex-shrink-0 flex flex-col transition-all duration-300 hover:shadow-3xl transform hover:-translate-y-1">
                    <div class="flex items-center mb-3 sm:mb-4">
                        <div class="p-2 sm:p-3 card-icon-bg text-white rounded-full shadow-md mr-0 ml-2 sm:ml-3">
                            <i class="fas fa-forward text-lg sm:text-xl md:text-2xl"></i>
                        </div>
                        <span class="year-badge-gradient text-white text-lg sm:text-xl font-bold px-3 sm:px-4 py-1 rounded-lg shadow">2025</span>
                    </div>
                    <h3 class="text-lg sm:text-xl font-bold text-indigo-800 mb-2">خدمات استباقية وذكاء اصطناعي متقدم</h3>
                    <p class="text-slate-600 text-xs sm:text-sm mb-3 flex-grow">
                        التركيز على تقديم خدمات استباقية للمستخدمين وتوظيف أحدث تقنيات الذكاء الاصطناعي.
                    </p>
                    <ul class="space-y-1 sm:space-y-1.5 text-xs sm:text-sm">
                        <li class="achievement-item"><i class="fas fa-magic fa-fw text-rose-600 mr-0 ml-2"></i> إطلاق خدمات استباقية.</li>
                        <li class="achievement-item"><i class="fas fa-traffic-light fa-fw text-rose-600 mr-0 ml-2"></i> تطوير نظام مراقبة حركة المرور بالذكاء الاصطناعي.</li>
                        <li class="achievement-item"><i class="fas fa-comments fa-fw text-rose-600 mr-0 ml-2"></i> محادثة ذكية لمركز الاتصال الافتراضي.</li>
                        <li class="achievement-item"><i class="fas fa-robot fa-fw text-rose-600 mr-0 ml-2"></i> الدردشة الذكية بالذكاء الاصطناعي.</li>
                    </ul>
                </div>

                <!-- Arrow Separator -->
                <div class="hidden md:flex items-center justify-center flex-shrink-0">
                    <i class="fas fa-long-arrow-alt-left text-indigo-700 text-2xl sm:text-3xl md:text-4xl opacity-50"></i>
                </div>

                <!-- Future Vision Card (New) -->
                <div class="future-vision-card rounded-xl shadow-2xl p-5 sm:p-6 w-72 sm:w-80 md:w-96 flex-shrink-0 flex flex-col transition-all duration-300 hover:shadow-3xl transform hover:-translate-y-1">
                    <div class="flex items-center mb-3 sm:mb-4">
                        <div class="p-2 sm:p-3 card-icon-bg text-white rounded-full shadow-md mr-0 ml-2 sm:ml-3">
                            <i class="fas fa-lightbulb text-lg sm:text-xl md:text-2xl"></i>
                        </div>
                        <span class="year-badge-gradient text-white text-lg sm:text-xl font-bold px-3 sm:px-4 py-1 rounded-lg shadow">الرؤية المستقبلية</span>
                    </div>
                    <h3 class="text-lg sm:text-xl font-bold text-indigo-800 mb-2">نحو ظفار رقمية، مستدامة، ومبتكرة</h3>
                    <p class="text-slate-600 text-xs sm:text-sm mb-3 flex-grow">
                        تتطلع بلدية ظفار إلى مستقبل رقمي متكامل، حيث تتجاوز الخدمات البلدية التوقعات لتصبح استباقية وذكية، مدعومة بأحدث تقنيات الذكاء الاصطناعي والميتافيرس. نهدف إلى بناء مدينة ذكية ومستدامة، تعزز جودة الحياة لسكان وزوار المحافظة، وتدعم الابتكار والمشاركة المجتمعية الفعالة، لتكون ظفار نموذجًا رائدًا في التحول الرقمي والخدمات الحكومية المتطورة.
                    </p>
                    <ul class="space-y-1 sm:space-y-1.5 text-xs sm:text-sm">
                        <li class="achievement-item"><i class="fas fa-city fa-fw text-rose-600 mr-0 ml-2"></i> مدينة ذكية مستدامة.</li>
                        <li class="achievement-item"><i class="fas fa-users-cog fa-fw text-rose-600 mr-0 ml-2"></i> خدمات استباقية ومخصصة.</li>
                        <li class="achievement-item"><i class="fas fa-robot fa-fw text-rose-600 mr-0 ml-2"></i> توظيف متقدم للذكاء الاصطناعي.</li>
                        <li class="achievement-item"><i class="fas fa-vr-cardboard fa-fw text-rose-600 mr-0 ml-2"></i> تجارب واقع افتراضي ومعزز.</li>
                        <li class="achievement-item"><i class="fas fa-hands-helping fa-fw text-rose-600 mr-0 ml-2"></i> مشاركة مجتمعية معززة.</li>
                    </ul>
                </div>

            </div>
        </div>

        <footer class="text-center mt-8 sm:mt-12 py-6 border-t border-slate-300">
            <p class="text-slate-600 text-sm">&copy; 2024 بلدية ظفار - جميع الحقوق محفوظة (تصميم إنفوجرافيك توضيحي أفقي)</p>
        </footer>
    </div>

    <script>
        const timelineContainer = document.getElementById('timelineContainer');
        // Swapped IDs for next/prev to reflect the desired functionality based on visual position
        const nextButton = document.getElementById('nextButton'); // Now on the right, scrolls content left (to next card)
        const prevButton = document.getElementById('prevButton'); // Now on the left, scrolls content right (to previous card)
        const scrollToStartButton = document.getElementById('scrollToStartButton');

        const getCardElements = () => Array.from(timelineContainer.querySelectorAll('div.bg-white.rounded-xl.shadow-2xl[class*="w-"], div.future-vision-card'));

        /**
         * Updates the disabled state of the navigation buttons based on the current scroll position.
         * In RTL, scrollLeft is 0 when scrolled fully to the right (start of content).
         * It increases positively as you scroll left. Max positive value is (scrollWidth - clientWidth).
         */
        function updateButtonStates() {
            if (!timelineContainer) return;
            const cards = getCardElements();
            if (cards.length === 0) {
                prevButton.disabled = true;
                nextButton.disabled = true;
                scrollToStartButton.disabled = true;
                return;
            }

            const scrollLeft = timelineContainer.scrollLeft;
            const scrollWidth = timelineContainer.scrollWidth;
            const clientWidth = timelineContainer.clientWidth;

            // Define a small threshold for "being at the edge"
            // Increased threshold slightly for better robustness across browsers
            const threshold = 5; // pixels

            // For RTL, scrollLeft is 0 when at the very right (start of content)
            // It increases as you scroll left.
            const atStart = Math.abs(scrollLeft) < threshold;

            // For RTL, when at the very left (end of content), scrollLeft is scrollWidth - clientWidth
            const maxScrollLeft = scrollWidth - clientWidth;
            const atEnd = Math.abs(scrollLeft - maxScrollLeft) < threshold;

            // Debugging logs - You can remove these after verifying functionality
            console.log('--- updateButtonStates ---');
            console.log('scrollLeft:', scrollLeft);
            console.log('scrollWidth:', scrollWidth);
            console.log('clientWidth:', clientWidth);
            console.log('maxScrollLeft:', maxScrollLeft);
            console.log('atStart:', atStart);
            console.log('atEnd:', atEnd);


            prevButton.disabled = atStart;
            nextButton.disabled = atEnd;
            scrollToStartButton.disabled = atStart;
        }

        /**
         * Finds the index of the rightmost card that is at least partially visible within the timeline container.
         * In RTL, this is the card with the lowest index that is visible.
         * @returns {number} The index of the rightmost visible card, or -1 if none are visible.
         */
        function getFirstVisibleCardIndex() {
            const cards = getCardElements();
            if (cards.length === 0) return -1;
            const containerRect = timelineContainer.getBoundingClientRect();

            for (let i = 0; i < cards.length; i++) {
                const cardRect = cards[i].getBoundingClientRect();
                // A card is visible if its right edge is past the container's left edge
                // AND its left edge is before the container's right edge.
                if (cardRect.right > containerRect.left && cardRect.left < containerRect.right) {
                    return i;
                }
            }
            return -1; // No card visible
        }

        /**
         * Finds the index of the leftmost card that is at least partially visible within the timeline container.
         * In RTL, this is the card with the highest index that is visible.
         * @returns {number} The index of the leftmost visible card, or -1 if none are visible.
         */
        function getLeftmostVisibleCardIndex() {
            const cards = getCardElements();
            if (cards.length === 0) return -1;
            const containerRect = timelineContainer.getBoundingClientRect();

            // Iterate from the end of the cards array (leftmost cards in DOM order)
            for (let i = cards.length - 1; i >= 0; i--) {
                const cardRect = cards[i].getBoundingClientRect();
                // If the card is visible (at least partially)
                if (cardRect.right > containerRect.left && cardRect.left < containerRect.right) {
                    return i;
                }
            }
            return -1;
        }


        // Event listener for Next button (now on the right, scrolls left to show later cards)
        nextButton.addEventListener('click', () => {
            const cards = getCardElements();
            if (cards.length === 0) return;

            // Get the index of the leftmost card currently visible
            let currentLeftmostIndex = getLeftmostVisibleCardIndex();
            // Fallback if no card is explicitly visible (e.g., container too small, or initial state)
            if (currentLeftmostIndex === -1) currentLeftmostIndex = 0; // Default to first card if nothing visible

            let targetIndex = currentLeftmostIndex + 1;
            if (targetIndex >= cards.length) {
                targetIndex = cards.length - 1; // Stay at the last card if at the end
            }

            if (cards[targetIndex]) {
                // For RTL, 'inline: "end"' aligns the element's left edge with the container's left edge.
                // This brings the target card into view from the right as we scroll left.
                cards[targetIndex].scrollIntoView({ behavior: 'smooth', inline: 'end', block: 'nearest' });
            }
            // Update button states after a short delay to allow scroll animation to complete
            setTimeout(updateButtonStates, 450);
        });

        // Event listener for Prev button (now on the left, scrolls right to show earlier cards)
        prevButton.addEventListener('click', () => {
            const cards = getCardElements();
            if (cards.length === 0) return;

            // Get the index of the rightmost card currently visible
            let currentRightmostIndex = getFirstVisibleCardIndex();
            // Fallback if no card is explicitly visible
            if (currentRightmostIndex === -1) currentRightmostIndex = 0;

            let targetIndex = currentRightmostIndex - 1;
            if (targetIndex < 0) {
                targetIndex = 0; // Stay at the first card if at the beginning
            }

            if (cards[targetIndex]) {
                // For RTL, 'inline: "start"' aligns the element's right edge with the container's right edge.
                // This brings the target card into view from the left as we scroll right.
                cards[targetIndex].scrollIntoView({ behavior: 'smooth', inline: 'start', block: 'nearest' });
            }
            // Update button states after a short delay
            setTimeout(updateButtonStates, 450);
        });

        // Event listener for Scroll to Start button
        scrollToStartButton.addEventListener('click', () => {
            const cards = getCardElements();
            if (cards.length > 0) {
                // Scroll the very first card (index 0) into view, aligning its right edge with container's right edge
                cards[0].scrollIntoView({ behavior: 'smooth', inline: 'start', block: 'nearest' });
            }
            // Update button states after a short delay
            setTimeout(updateButtonStates, 450);
        });

        // Initial button states on load, ensuring layout is settled
        window.addEventListener('load', () => {
            requestAnimationFrame(updateButtonStates);
        });
        // Update button states whenever the container is scrolled
        timelineContainer.addEventListener('scroll', updateButtonStates);
        // Update button states on window resize, as visibility might change
        window.addEventListener('resize', updateButtonStates);
    </script>
</body>
</html>
